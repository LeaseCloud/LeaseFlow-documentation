<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>LeaseCloud API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.leasecloud.se'>LeaseCloud AB</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to LeaseCloud API reference site. Please feel free to contact us if you have any questions or feedback.</p>

<p>Here you will find everything you need to develop LeaseCloud modules for different e-commerce platforms or to integrate LeaseCloud in your checkout.</p>

<!---
# SDK
* [PHP SDK](https://github.com/LeaseCloud/leasecloud-php-sdk)
* [.NET SDK](https://github.com/LeaseCloud/leasecloud-dotnet-sdk)

# Plugins
* [Woocommerce](https://wordpress.org/plugins/leasecloud-for-woocommerce/)
* Magento [M1](https://www.leasecloud.se/leasing-magento-m1/) [M2](https://www.leasecloud.se/leasing-magento-2)
-->

<h1 id="authorization">Authorization</h1>

<div class="move-right">
  <h3>Required http header</h3>
</div>
<pre class="highlight yaml tab-yaml"><code><span class="na">Authorization</span><span class="pi">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<p>All requests requires <code class="prettyprint">Authorization</code> header to be set with <code class="prettyprint">Bearer [ACCESS_TOKEN]</code>.
When you are becoming a partner we will give you a access token and a webhook token</p>

<p>Use this <a href="https://www.leasecloud.se/#lc-contact">contact form</a> to get a API key or give us a call at +46844688110.</p>

<p>Until we have a signed partner agreement you will use a sandbox API key that is fully functional but doesn’t create live orders.</p>

<h1 id="data-formats">Data formats</h1>

<h3 id="amount">Amount</h3>

<p>All amounts will be in the smallest currency amount. E.g. 1 SEK = 100 ören, 1 USD = 100 cent</p>

<h3 id="strings">Strings</h3>

<p>The maximum length of a string may be 255 characters.</p>

<h3 id="currency">Currency</h3>

<p>All currencies is in ISO 4217 standard. E.g. SEK, EUR</p>

<h3 id="country">Country</h3>

<p>All Countries are is in ISO 3166 alpha-2. E.g. se = Sweden, no = Norway.</p>

          <h1 id="checkout">Checkout</h1>

<h2 id="introduction">Introduction</h2>

<p>LeaseCloud checkout is designed to be used either as a complete checkout solution for leasing only sites or as a payment provider within an existing checkout-flow for sites that wish to provide other payment methods.</p>

<p>The following description describes the initial implementation that will be checkout only.</p>

<p>The url to staging is https://flow.staging.leasecloud.com</p>

<h2 id="partner-site-setup">Partner site setup</h2>

<p>The following items need to be setup by the partner in order to integrate with the LeaseCloud checkout.</p>

<table><thead>
<tr>
<th>Page</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Checkout page</td>
<td>A URL to the page used to embed the LeaseCloud checkout. Includes a div that will be populated with HTML code received from the LeaseCloud checkout api.</td>
</tr>
<tr>
<td>Confirmation page</td>
<td>A URL to the page the LeaseCloud checkout will redirect to when the checkout process completes. Includes a div that will be populated with HTML code received from the LeaseCloud checkout api.</td>
</tr>
<tr>
<td>Terms and conditions page</td>
<td>A URL to the partners terms and conditions that any customer agrees to by purchasing via their site</td>
</tr>
</tbody></table>

<h2 id="starting-the-checkout-process">Starting the checkout process</h2>

<p>Before starting the checkout process the customer must have selected one or more items they wish to buy. The partners site may then trigger a checkout by making a http request to the <a href="#checkout-api-entry-point">checkout API entry point</a>.
The LeaseCloud orderID should be saved by the partner and connected to the checkout (to allow the order to be updated before checkout completion) and the partners checkout page should be displayed with the html code snippet received from the entry point embedded in it.</p>

<h2 id="completing-the-checkout-process">Completing the checkout process</h2>

<p>Once the LeaseCloud checkout process has been successfully completed the customer will be redirected to the confirmation url sent during the initial checkout request.</p>

<p>The partner can then retrieve the completed checkout information via a request to the <a href="#retrieve-an-order">order API</a>. Note that when the checkout is complete the item may still not be ready to send, the status of the order retrieved is provided in the response and the order should only be dispatched to the customer when the status is OK.</p>

<p>The information will also be synced back to the shop via the notification webhook sent in the initial request to the checkout API entry point.</p>

<h2 id="updating-a-checkout-process">Updating a checkout process</h2>

<p>If the customer does not forfill the checkout process and returns to the shop to modify items or shipping information. The partners site can update the order on the LeaseCloud checkout by performing a http request containing the new information to the  LeaseCloud <a href="#checkout-api-update-end-point">checkout API update end point</a>.</p>

<h2 id="checkout-api-entry-point">Checkout API entry point</h2>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/v1/orders</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<div class="move-right">
  <h3>Request body example</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">12000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shippingAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shippingVAT"</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="mi">0</span><span class="err">'</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SEK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sv-se"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"months"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w">
  </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MacBook Pro 15"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"articleNr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NCC-5347XF"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unitAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3400000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3400000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iPhone X"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"233"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"articleNr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC-53RF7XF"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unitAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1200000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2400000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"partnerUrls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"terms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.example.se/terms"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"checkout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.example.se/checkout"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.example.se/confirmation"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<div class="move-right">
  <h3>Response body</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"html"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div id=’leasecloud_leaseflow_container’&gt;
        &lt;script&gt;(function() {
          // Some script to load the iframe into the page
          var conf = {
            orderID: '1293u924972439'
          }
          createElement(script)
        })()&lt;/script&gt;
        &lt;noscript&gt;Please &lt;a href=’https://enable-javascript.com/’&gt;enable javascript&lt;/a&gt;.&lt;/noscript&gt;
      &lt;/div&gt;"</span><span class="w">
  </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1293u924972439"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<div class="move-right">
  <h3>Error response body</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"InvalidOrder"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation error"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notNull Violation"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"totalAmount cannot be null"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"totalAmount"</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /v1/orders</code></p>

<h3 id="http-body">HTTP Body</h3>

<p>The body of the http request contains the order information.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>partnerUrls</td>
<td>object</td>
<td>✔︎</td>
<td>An object containing urls to the relevant partner pages</td>
</tr>
<tr>
<td>• terms</td>
<td>string</td>
<td>✔︎</td>
<td>The terms and conditions url</td>
</tr>
<tr>
<td>• checkout</td>
<td>string</td>
<td>✔︎</td>
<td>The checkout page url</td>
</tr>
<tr>
<td>• confirmation</td>
<td>string</td>
<td>✔︎</td>
<td>The confirmation page url</td>
</tr>
<tr>
<td>• webhook</td>
<td>string</td>
<td>✔︎</td>
<td>The notification webhook url</td>
</tr>
<tr>
<td>totalAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>Total amount the customer will pay Ex. VAT <br> Minimum 6000 * 100</td>
</tr>
<tr>
<td>VAT</td>
<td>integer</td>
<td>✔︎</td>
<td>Total VAT amount</td>
</tr>
<tr>
<td>shippingAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>The shipping cost</td>
</tr>
<tr>
<td>shippingVAT</td>
<td>integer</td>
<td>✔︎</td>
<td>The shipping cost VAT</td>
</tr>
<tr>
<td>currency</td>
<td>enum</td>
<td>✔︎</td>
<td>In which currency is the amounts. We only support <code class="prettyprint">SEK</code> at the moment</td>
</tr>
<tr>
<td>locale</td>
<td>enum</td>
<td>✔︎</td>
<td>Purchase language string compliant with RFC 1766</td>
</tr>
<tr>
<td>country</td>
<td>enum</td>
<td>✔︎</td>
<td>The purchase country 2 letter code e.g. SE</td>
</tr>
<tr>
<td>months</td>
<td>integer</td>
<td></td>
<td>The leasing period in months, if known</td>
</tr>
<tr>
<td>items</td>
<td>Item object</td>
<td>✔︎</td>
<td>See below</td>
</tr>
</tbody></table>

<h3 id="item-object">Item object</h3>

<p>The items object contains an array of items.</p>

<h4 id="bundled-items">Bundled items</h4>

<p>When items are part of a bundle, a bundle id should be created for the bundle and the bundle should be added to the items array as if it was a normal item. The items that make up the bundle should also be added to the array but with a 0 for toal cost and a bundle id attribute linking to the bundle.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>✔︎</td>
<td>Name / title of the product</td>
</tr>
<tr>
<td>productId</td>
<td>string</td>
<td>✔︎</td>
<td>Product id</td>
</tr>
<tr>
<td>articleNr</td>
<td>string</td>
<td></td>
<td>Article number</td>
</tr>
<tr>
<td>bundleId</td>
<td>string</td>
<td></td>
<td>If the item is part of a bundle or is the bundle add the id</td>
</tr>
<tr>
<td>quantity</td>
<td>integer</td>
<td>✔︎</td>
<td>Quantity</td>
</tr>
<tr>
<td>unitAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>Price for a single unit ex VAT</td>
</tr>
<tr>
<td>totalAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>Total amount (quantity * unitAmount) ex VAT</td>
</tr>
<tr>
<td>VAT</td>
<td>integer</td>
<td>✔︎</td>
<td>VAT for the total amount</td>
</tr>
</tbody></table>

<h3 id="http-response">HTTP Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>html</td>
<td>string</td>
<td>The HTML snippet to load the checkout iframe</td>
</tr>
<tr>
<td>orderId</td>
<td>string</td>
<td>The leasecloud order id</td>
</tr>
</tbody></table>

<h2 id="checkout-api-update-end-point">Checkout API update end point</h2>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/v1/orders/{orderId}</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<div class="move-right">
  <h3>Request body example</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">12000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shippingAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shippingVAT"</span><span class="p">:</span><span class="w"> </span><span class="err">'</span><span class="mi">0</span><span class="err">'</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SEK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sv-se"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"months"</span><span class="p">:</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w">
  </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MacBook Pro 15"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unitAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3400000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3400000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iPhone X"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"233"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unitAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1200000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2400000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"partnerUrls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"terms"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.example.se/terms"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"checkout"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.example.se/checkout"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.example.se/confirmation"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<div class="move-right">
  <h3>Response body</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"html"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;div id=’leasecloud_leaseflow_container’&gt;
        &lt;script&gt;(function() {
          // Some script to load the iframe into the page
          var conf = {
            orderID: '1293u924972439'
          }
          createElement(script)
        })()&lt;/script&gt;
        &lt;noscript&gt;Please &lt;a href=’https://enable-javascript.com/’&gt;enable javascript&lt;/a&gt;.&lt;/noscript&gt;
      &lt;/div&gt;"</span><span class="w">
  </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1293u924972439"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<div class="move-right">
  <h3>Error response body</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"InvalidOrder"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation error"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notNull Violation"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"totalAmount cannot be null"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"totalAmount"</span><span class="w">
      </span><span class="p">},</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /v1/orders/{orderId}</code></p>

<h3 id="http-body">HTTP Body</h3>

<p>The body of the http request contains the order information.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>partnerUrls</td>
<td>object</td>
<td>✔︎</td>
<td>An object containing urls to the relevant partner pages</td>
</tr>
<tr>
<td>• terms</td>
<td>string</td>
<td>✔︎</td>
<td>The terms and conditions url</td>
</tr>
<tr>
<td>• checkout</td>
<td>string</td>
<td>✔︎</td>
<td>The checkout page url</td>
</tr>
<tr>
<td>• confirmation</td>
<td>string</td>
<td>✔︎</td>
<td>The confirmation page url</td>
</tr>
<tr>
<td>• webhook</td>
<td>string</td>
<td>✔︎</td>
<td>The notification webhook url</td>
</tr>
<tr>
<td>totalAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>Total amount the customer will pay Ex. VAT <br> Minimum 6000 * 100</td>
</tr>
<tr>
<td>VAT</td>
<td>integer</td>
<td>✔︎</td>
<td>Total VAT amount</td>
</tr>
<tr>
<td>shippingAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>The shipping cost</td>
</tr>
<tr>
<td>shippingVAT</td>
<td>integer</td>
<td>✔︎</td>
<td>The shipping cost VAT</td>
</tr>
<tr>
<td>currency</td>
<td>enum</td>
<td>✔︎</td>
<td>In which currency is the amounts. We only support <code class="prettyprint">SEK</code> at the moment</td>
</tr>
<tr>
<td>locale</td>
<td>enum</td>
<td>✔︎</td>
<td>Purchase language string compliant with RFC 1766</td>
</tr>
<tr>
<td>country</td>
<td>enum</td>
<td>✔︎</td>
<td>The purchase country 2 letter code e.g. SE</td>
</tr>
<tr>
<td>months</td>
<td>integer</td>
<td></td>
<td>The leasing period in months, if known</td>
</tr>
<tr>
<td>items</td>
<td>Item object</td>
<td>✔︎</td>
<td>See below</td>
</tr>
</tbody></table>

<h3 id="item-object">Item object</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>✔︎</td>
<td>Name / title of the product</td>
</tr>
<tr>
<td>productId</td>
<td>string</td>
<td>✔︎</td>
<td>Product id</td>
</tr>
<tr>
<td>quantity</td>
<td>integer</td>
<td>✔︎</td>
<td>Quantity</td>
</tr>
<tr>
<td>articleNr</td>
<td>string</td>
<td></td>
<td>Article number</td>
</tr>
<tr>
<td>bundleId</td>
<td>string</td>
<td></td>
<td>If the item is part of a bundle or is the bundle add the id</td>
</tr>
<tr>
<td>unitAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>Price for a single unit ex VAT</td>
</tr>
<tr>
<td>totalAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>Total amount (quantity * unitAmount) ex VAT</td>
</tr>
<tr>
<td>VAT</td>
<td>integer</td>
<td>✔︎</td>
<td>VAT for the total amount</td>
</tr>
</tbody></table>

<h3 id="http-response">HTTP Response</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>html</td>
<td>string</td>
<td>The HTML snippet to load the checkout iframe</td>
</tr>
<tr>
<td>orderId</td>
<td>string</td>
<td>The leasecloud order id</td>
</tr>
</tbody></table>

          <h1 id="orders">Orders</h1>

<p>Orders api provides the end points for retreiving and manipulating orders after they have been added to leasecloud via the checkout api.</p>

<p>The url to staging is https://api.staging.leasecloud.com</p>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/v2/orders</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<div class="move-right">
  <h3>Response body</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c1f0acd8-8e3e-4477-85d3-18337c3c92d6"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"orgNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5590894308"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PENDING"</span><span class="w">
  </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">23323</span><span class="p">,</span><span class="w">
  </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shippingAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shippingVAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SEK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"months"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ora"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Roob"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Myrtice70@yahoo.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(719) 365-7934 x29126"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Langosh, Kautzer and Ullrich"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1532 Edna Spring"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"East Guidofort"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17875"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"shipping"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Brigitte"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wunsch"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jon60@gmail.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"803-546-0329"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Volkman - Goodwin"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46995 Sandra Green"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"South Aileenfurt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47920"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MacBook Pro 15"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"articleNr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NCC-5347XF"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unitAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3400000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3400000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"iPhone X"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"233"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"articleNr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC-5347XF"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unitAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1200000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2400000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-03T15:10:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-03T15:10:00.000Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="retrieve-an-order">Retrieve an order</h2>

<p>To retrieve a order after checkout has been completed make a <code class="prettyprint">GET</code> request <code class="prettyprint">/v2/orders/{orderId}</code></p>

<p>An order information will be returned, including it&rsquo;s current status. See example on right.</p>

<h3 id="order-statuses">Order statuses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>PENDING</td>
<td>The order has been received but the customer has not signed or the leasing company has not yet authorized the transaction. The order should not be shipped</td>
</tr>
<tr>
<td>OK</td>
<td>All requirements have been forfilled and the order can be shipped</td>
</tr>
<tr>
<td>DONE</td>
<td>The order has been forfilled and the contract started, changes are no longer possible by the partner</td>
</tr>
<tr>
<td>CANCELLED</td>
<td>The order has been cancelled</td>
</tr>
</tbody></table>

<h2 id="cancel-an-order">Cancel an order</h2>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/v2/orders/{orderId}/cancel</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<p>To cancel an order make a <code class="prettyprint">POST</code> request <code class="prettyprint">/v2/orders/{orderId}/cancel</code>
which will respond with 200 and an empty body</p>

<p>An order can be canceled until the user has signed the order</p>

<h2 id="order-shipped">Order shipped</h2>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/v2/orders/{orderId}/shipped</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<div class="move-right">
  <h3>(Optional) Request body example</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"shippedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-20T13:37:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"trackingLink"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://some-postal.com/kolli/124258652346"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"trackingNr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"124258652346"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Make a <code class="prettyprint">POST</code> request to <code class="prettyprint">/v2/orders/{orderId}/shipped</code> when an order has been shipped.
When the request is received we will set the current time as the shipped date
and time but you can send the body <code class="prettyprint">shippedAt</code> and ISO-8601 date to override the date.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>shippedAt</td>
<td>string</td>
<td></td>
<td>Date and time shipped ISO-8601</td>
</tr>
<tr>
<td>trackingLink</td>
<td>string</td>
<td></td>
<td>A link to the postal companies tracking page for this shippment</td>
</tr>
<tr>
<td>trackingNr</td>
<td>string</td>
<td></td>
<td>The tracking number for the package</td>
</tr>
</tbody></table>

<h2 id="order-serial-numbers">Order serial numbers</h2>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/v2/orders/{orderId}/serial-numbers</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<div class="move-right">
  <h3>(Optional) Request body example</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"serials: [{
        productId: "</span><span class="mi">13</span><span class="s2">",
        description: "</span><span class="err">MacBook</span><span class="w"> </span><span class="err">Pro</span><span class="w"> </span><span class="mi">15</span><span class="s2">",
        serialNumber: "</span><span class="err">C</span><span class="mi">02</span><span class="err">SP</span><span class="mi">3</span><span class="err">SRKJKNFVFB</span><span class="mi">23</span><span class="s2">"
    }]
}
</span></code></pre>
<p>Make a <code class="prettyprint">POST</code> request to <code class="prettyprint">/v2/orders/{orderId}/serial-numbers</code> when the serial numbers are known.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>serials</td>
<td>array</td>
<td>✔︎</td>
<td>An array of one or more serials</td>
</tr>
<tr>
<td>trackingLink</td>
<td>string</td>
<td></td>
<td>A link to the postal companies tracking page for this shippment</td>
</tr>
<tr>
<td>trackingNr</td>
<td>string</td>
<td></td>
<td>The tracking number for the package</td>
</tr>
</tbody></table>

          <h1 id="webhooks">Webhooks</h1>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">https://example.com/my/callback/</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">LeaseCloud-Version</span><span class="p">:</span> <span class="s">1.0.0</span>
<span class="na">LeaseCloud-Signature</span><span class="p">:</span> <span class="s">t=1499785732,v1=[HMAC_SHA-256_PAYLOAD],v1=[HMAC_SHA-256_PAYLOAD_OLD]</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNIQUE_EVENT_ID"</span><span class="w">
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NAME_OF_ACTION"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"FIELDS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FOR ACTION"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s2">"sha256"</span><span class="p">,</span> <span class="s2">"${TIMESTAMP}.${PAYLOAD}"</span><span class="p">,</span> <span class="nx">WEBHOOK_SECRET</span><span class="p">);</span>
</code></pre>
<p>When becoming a partner we will ask for a url endpoint where we will make post requests to with updates.
Webhooks are used to communicate events from leasecloud back to the partners site. They always contain the same datastructure.</p>

<p>We will make a POST request to the endpoint with a JSON body</p>

<p>The signature is generated with the timestamp found in the LeaseCloud-Signature header combined with a . and the payload.</p>

<h2 id="order-status-updated">Order status updated</h2>

<div class="move-right">
  <h3>Response body</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt:e1f0aed8-883a-9751-74a3-48537d3d94ce"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c1f0acd8-8e3e-4477-85d3-18337c3c92d6"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"orgNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5590894308"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PENDING"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">23323</span><span class="p">,</span><span class="w">
    </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shippingAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shippingVAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SEK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"months"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ora"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Roob"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Myrtice70@yahoo.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(719) 365-7934 x29126"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Langosh, Kautzer and Ullrich"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1532 Edna Spring"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"East Guidofort"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"17875"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"shipping"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Brigitte"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wunsch"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jon60@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"803-546-0329"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Volkman - Goodwin"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"46995 Sandra Green"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"South Aileenfurt"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47920"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Towels"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"articleNr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NCC-5347XF"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
        </span><span class="s2">"unitAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span><span class="w">
        </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">8400</span><span class="p">,</span><span class="w">
        </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOPE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"233"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"articleNr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NCC-5347XF"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
        </span><span class="s2">"unitAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span><span class="w">
        </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">8400</span><span class="p">,</span><span class="w">
        </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-03T15:10:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-03T15:10:00.000Z"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>We will make a <code class="prettyprint">POST</code> request to the notification WebHook endpoint provided in the initial checkout request every time the order status is updated.</p>

<p>The signature is generated with the timestamp found in the <code class="prettyprint">LeaseCloud-Signature</code> header combined with a <code class="prettyprint">.</code> and the <code class="prettyprint">payload</code></p>

<p>An example of the request body is provided on the right</p>

<p>The webhook will be repeatedly called until the partner acknowledges receipt. Acknowledgement is achieved by the store replying to the webhook with a 200 response, and a json object containing the leasecloud orderId and optionally the partners id for the order.</p>

<h3 id="actions">Actions</h3>

<ul>
<li>order.created</li>
<li>order.statusUpdated</li>
</ul>

          <h1 id="errors">Errors</h1>
<pre class="highlight json tab-json"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrderCantBeModified"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"It's to late to edit the order"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>LeaseCloud are using rest status <a href="http://www.restapitutorial.com/httpstatuscodes.html">codes</a></p>

<p>If there is an error we will return a 4xx or 5xx status code</p>

<p>The response will be a json object only containing an error object.</p>

<p>The error object will always contain <code class="prettyprint">code</code> and <code class="prettyprint">message</code> and in the case of
<code class="prettyprint">InvalidOrder</code> it will also contain <code class="prettyprint">fields</code> which is an array of invalid fields.</p>

<h3 id="codes">Codes:</h3>

<p><strong>Default responses</strong></p>

<ul>
<li>NotFound <strong>404</strong></li>
<li>BadRequest <strong>400</strong></li>
<li>Forbidden <strong>403</strong></li>
<li>InternalServerError <strong>500</strong></li>
</ul>

<p><strong>Custom errors</strong></p>

<ul>
<li>InvalidOrder <strong>400</strong> = Invalid form input and also contains <code class="prettyprint">fields</code> attribute</li>
<li>OrderNotAccepted <strong>400</strong> = When an order is denied instantly like none existing org number or bad credit rating</li>
<li>OrderCantBeModified <strong>403</strong> = When it&rsquo;s to late or to early to change an order e.g. edit an order that is shipped</li>
</ul>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"InvalidOrder"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation error"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"totalAmount cannot be null"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"totalAmount"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="fields">Fields</h3>

<ul>
<li>field = Which field that didn&rsquo;t pass the validation</li>
<li>message = Human readable reason for invalidation</li>
<li>code = Only a few errors get&rsquo;s a code at the moment</li>
</ul>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
