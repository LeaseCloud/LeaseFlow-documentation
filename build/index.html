<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>LeaseCloud API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.leasecloud.se'>LeaseCloud AB</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to LeaseCloud API reference site. Please feel free to contact us if you have any questions or feedback.</p>

<p>Here you will find everything you need to develop LeaseCloud modules for different e-commerce platforms or to integrate LeaseCloud in your checkout.</p>

<h1 id="sdk">SDK</h1>

<ul>
<li><a href="https://github.com/LeaseCloud/leasecloud-php-sdk">PHP SDK</a></li>
<li><a href="https://github.com/LeaseCloud/leasecloud-dotnet-sdk">.NET SDK</a></li>
</ul>

<h1 id="plugins">Plugins</h1>

<ul>
<li><a href="https://wordpress.org/plugins/leasecloud-for-woocommerce/">Woocommerce</a></li>
<li>Magento <a href="https://www.leasecloud.se/leasing-magento-m1/">M1</a> <a href="https://www.leasecloud.se/leasing-magento-2">M2</a></li>
</ul>

<h1 id="authorization">Authorization</h1>

<div class="move-right">
  <h3>Required http header</h3>
</div>
<pre class="highlight yaml tab-yaml"><code><span class="na">Authorization</span><span class="pi">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<p>All requests requires <code class="prettyprint">Authorization</code> header to be set with <code class="prettyprint">Bearer [ACCESS_TOKEN]</code>.
When you are becoming a partner we will give you a access token and a webhook token</p>

<p>Use this <a href="https://www.leasecloud.se/#lc-contact">contact form</a> to get a API key or give us a call at +46844688110.</p>

<p>Until we have a signed partner agreement you will use a sandbox API key that is fully functional but doesn’t create live orders.</p>

<h1 id="data-formats">Data formats</h1>

<h3 id="amount">Amount</h3>

<p>All amounts will be in the smallest currency amount. E.g. 1 SEK = 100 ören, 1 USD = 100 cent</p>

<h3 id="strings">Strings</h3>

<p>The maximum length of a string may be 255 characters.</p>

<h3 id="currency">Currency</h3>

<p>All currencies is in ISO 4217 standard. E.g. SEK, EUR</p>

<h3 id="country">Country</h3>

<p>All Countries are is in ISO 3166 alpha-2. E.g. se = Sweden, no = Norway.</p>

          <h1 id="orders">Orders</h1>

<h2 id="create-a-new-order">Create a new order</h2>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/v1/orders</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<div class="move-right">
  <h3>Request body example</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c8e0bda3-dbe0-55ad-8de7-4b341fab49a3"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Matthew"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hunter"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LeaseCloud AB"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"orgNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"559089-4308"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hello@leasecloud.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authorizedSignatory"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"09 61 64 48 49"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customerIp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"131.168.20.70"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1010000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">252500</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shippingAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"shippingVAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SEK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"months"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
  </span><span class="s2">"tariff"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"billing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mystreet 121"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Stockholm"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SE"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"shipping"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postalCode"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"customerMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I like cookies!"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Shiny new phone"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32832849-23cc-550c-9456-06ea2ff0b55c"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unitAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">250000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">125000</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40</span><span class="se">\"</span><span class="s2"> TV"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"productId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"88624a25-e7e8-5da4-a819-8af8f5079ce2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unitAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"totalAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">500000</span><span class="p">,</span><span class="w">
      </span><span class="s2">"VAT"</span><span class="p">:</span><span class="w"> </span><span class="mi">125000</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<div class="move-right">
  <h3>Response body</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c8e0bda3-dbe0-55ad-8de7-4b341fab49a3"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"monthlyAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50500</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<div class="move-right">
  <h3>Error response body</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"InvalidOrder"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation error"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notNull Violation"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orderId cannot be null on orderId"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orderId"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A valid organisation number is required e.g. xxxxxx-xxxx on orgNumber"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orgNumber"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST /v1/orders</code></p>

<h3 id="order-object">Order object</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orderId</td>
<td>string</td>
<td>✔︎</td>
<td>A unique ID for the order</td>
</tr>
<tr>
<td>firstName</td>
<td>string</td>
<td>✔︎</td>
<td>Given name</td>
</tr>
<tr>
<td>lastName</td>
<td>string</td>
<td>✔︎</td>
<td>Family name</td>
</tr>
<tr>
<td>company</td>
<td>string</td>
<td>✔︎</td>
<td>Name of the company</td>
</tr>
<tr>
<td>orgNumber</td>
<td>string</td>
<td>✔︎</td>
<td>Company organisation number 000000-0000</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>✔︎</td>
<td>Valid email address</td>
</tr>
<tr>
<td>authorizedSignatory</td>
<td>string</td>
<td></td>
<td>Email of the person authorized to sign the contract</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>✔︎</td>
<td>Phone number</td>
</tr>
<tr>
<td>customerIp</td>
<td>string</td>
<td>✔︎</td>
<td>IP of the customer (for extra fraud check)</td>
</tr>
<tr>
<td>totalAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>Total amount the customer will pay Ex. VAT <br> Minimum 6000 * 100</td>
</tr>
<tr>
<td>VAT</td>
<td>integer</td>
<td>✔︎</td>
<td>Total VAT amount</td>
</tr>
<tr>
<td>shippingAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>The shipping cost</td>
</tr>
<tr>
<td>shippingVAT</td>
<td>integer</td>
<td>✔︎</td>
<td>The shipping cost VAT</td>
</tr>
<tr>
<td>currency</td>
<td>enum</td>
<td>✔︎</td>
<td>In which currency is the amounts. We only support <code class="prettyprint">SEK</code> at the moment</td>
</tr>
<tr>
<td>months</td>
<td>integer</td>
<td>✔︎</td>
<td>How many months the customer want to lease for</td>
</tr>
<tr>
<td>tariff</td>
<td>decimal</td>
<td>✔︎</td>
<td>What was the current tariff when the purchase</td>
</tr>
<tr>
<td>billing</td>
<td>object</td>
<td>✔︎</td>
<td>An object containing the billing fields below</td>
</tr>
<tr>
<td>• address</td>
<td>string</td>
<td>✔︎</td>
<td>The street address</td>
</tr>
<tr>
<td>• address2</td>
<td>string</td>
<td></td>
<td>Second street address line</td>
</tr>
<tr>
<td>• city</td>
<td>string</td>
<td>✔︎</td>
<td>City</td>
</tr>
<tr>
<td>• state</td>
<td>string</td>
<td></td>
<td>State if applicable</td>
</tr>
<tr>
<td>• postalCode</td>
<td>string</td>
<td>✔︎</td>
<td>Postal code</td>
</tr>
<tr>
<td>• country</td>
<td>string</td>
<td>✔︎</td>
<td>Country 2 letter code e.g. SE</td>
</tr>
<tr>
<td>shipping</td>
<td>object</td>
<td></td>
<td>An object containing the sipping fields below</td>
</tr>
<tr>
<td>• firstName</td>
<td>string</td>
<td></td>
<td>Given name</td>
</tr>
<tr>
<td>• lastName</td>
<td>string</td>
<td></td>
<td>Family name</td>
</tr>
<tr>
<td>• company</td>
<td>string</td>
<td></td>
<td>Company name</td>
</tr>
<tr>
<td>• address</td>
<td>string</td>
<td></td>
<td>Street address</td>
</tr>
<tr>
<td>• address2</td>
<td>string</td>
<td></td>
<td>Street address line 2</td>
</tr>
<tr>
<td>• city</td>
<td>string</td>
<td></td>
<td>City</td>
</tr>
<tr>
<td>• state</td>
<td>string</td>
<td></td>
<td>State if applicable</td>
</tr>
<tr>
<td>• postalCode</td>
<td>string</td>
<td></td>
<td>Postal code</td>
</tr>
<tr>
<td>• country</td>
<td>string</td>
<td></td>
<td>Country 2 letter code e.g. SE</td>
</tr>
<tr>
<td>customerMessage</td>
<td>string</td>
<td></td>
<td>If the user left a custom message</td>
</tr>
<tr>
<td>items</td>
<td>Item object</td>
<td>✔︎</td>
<td>See below</td>
</tr>
</tbody></table>

<h3 id="item-object">Item object</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>✔︎</td>
<td>Name / title of the product</td>
</tr>
<tr>
<td>productId</td>
<td>string</td>
<td>✔︎</td>
<td>Product id</td>
</tr>
<tr>
<td>quantity</td>
<td>integer</td>
<td>✔︎</td>
<td>Quantity</td>
</tr>
<tr>
<td>unitAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>Price for a single unit ex VAT</td>
</tr>
<tr>
<td>totalAmount</td>
<td>integer</td>
<td>✔︎</td>
<td>Total amount (quantity * unitAmount) ex VAT</td>
</tr>
<tr>
<td>VAT</td>
<td>integer</td>
<td>✔︎</td>
<td>VAT for the total amount</td>
</tr>
<tr>
<td>sku</td>
<td>string</td>
<td></td>
<td>Stock Keeping Unit</td>
</tr>
<tr>
<td>variationId</td>
<td>string</td>
<td></td>
<td>Variation id</td>
</tr>
<tr>
<td>serialNumber</td>
<td>string</td>
<td></td>
<td>Serial number of the product</td>
</tr>
</tbody></table>

<!-- -->

<h2 id="cancel-an-order">Cancel an order</h2>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/v1/orders/{orderId}/cancel</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<p>To cancel an order make a <code class="prettyprint">POST</code> request <code class="prettyprint">/v1/orders/{orderId}/cancel</code>
which will respond with 200 and an empty body</p>

<p>An order can be canceled until the user has signed the order</p>

<h2 id="order-shipped">Order shipped</h2>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/v1/orders/{orderId}/shipped</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<div class="move-right">
  <h3>(Optional) Request body example</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"shippedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-20T13:37:00.000Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Make a <code class="prettyprint">POST</code> request to <code class="prettyprint">/v1/orders/{orderId}/shipped</code> when an order has been shipped.
When the request is received we will set the current time as the shipped date
and time but you can send the body <code class="prettyprint">shippedAt</code> and ISO-8601 date to override the date.</p>

<p>We will then send a confirmation email where the customer sign that they
have received the package and the order is completed.</p>

<h2 id="get-order-status">Get order status</h2>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/v1/orders/{orderId}/status</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"statuses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACCEPTED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"setAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-04T13:55:16.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SIGNED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"setAt"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHIPPED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"setAt"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DELIVERY_APPROVED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"setAt"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DECLINED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"setAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-05T13:37:12.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not credit worthy"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCELLED"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"setAt"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get the current status for an order</p>

<table><thead>
<tr>
<th>Status</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ACCEPTED</td>
<td>The order has been accepted and are waiting for the customer to sign the agreement</td>
</tr>
<tr>
<td>SIGNED</td>
<td>The customer has signed and the order can be shipped</td>
</tr>
<tr>
<td>DELIVERY_APPROVED</td>
<td>The customer has signed that the order has arrived</td>
</tr>
<tr>
<td>DECLINED</td>
<td>The order has been declined</td>
</tr>
<tr>
<td>CANCELLED</td>
<td>The order has been cancelled</td>
</tr>
</tbody></table>

          <h1 id="config">Config</h1>

<h2 id="get-current-config">Get current config</h2>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/v1/config</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer [bearer token]</span>
</code></pre>
<div class="move-right">
  <h3>Response body</h3>
</div>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"financeCompany"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Montly Leasing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://example.com/logo.svg"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"tariffs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">  
    </span><span class="p">{</span><span class="w">  
      </span><span class="s2">"months"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tariff"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.47</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">  
      </span><span class="s2">"months"</span><span class="p">:</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w">
      </span><span class="s2">"tariff"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.04</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Config contains tariffs and info about the finance company</p>

          <h1 id="webhooks">Webhooks</h1>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">https://example.com/my/callback/</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">LeaseCloud-Version</span><span class="p">:</span> <span class="s">1.0.0</span>
<span class="na">LeaseCloud-Signature</span><span class="p">:</span> <span class="s">t=1499785732,v1=[HMAC_SHA-256_PAYLOAD],v1=[HMAC_SHA-256_PAYLOAD_OLD]</span>

{
  "id": "UNIQUE_EVENT_ID"
  "action": "NAME_OF_ACTION",
  "data": {
    "FIELDS": "FOR ACTION"
  }
}
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s2">"sha256"</span><span class="p">,</span> <span class="s2">"${TIMESTAMP}.${PAYLOAD}"</span><span class="p">,</span> <span class="nx">WEBHOOK_SECRET</span><span class="p">);</span>
</code></pre>
<p>When becoming a partner we will ask for a url endpoint where we will make post requests to with updates.</p>

<p>We will make a <code class="prettyprint">POST</code> request to the endpoint with a JSON body</p>

<p>The signature is with generated with the timestamp found in the <code class="prettyprint">LeaseCloud-Signature</code> header combined with a <code class="prettyprint">.</code> and the <code class="prettyprint">payload</code></p>

<p>We will make up 12 attempts to deliver the webhook with exponential delay up to 7 days from first try.
Returns 200 http status for success else we are assuming it failed.</p>

<h3 id="events">Events</h3>

<ul>
<li>order.accepted</li>
<li>order.declined</li>
<li>order.signed</li>
<li>order.deliveryApproved</li>
<li>tariff.updated</li>
</ul>

<h3 id="order-accepted">Order accepted</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt:sdfgkjshdfg87oihsjdgfb"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.accepted"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>When we have accepted an order and awaiting the customer to sign the agreement</p>

<h3 id="order-declined">Order declined</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt:askjshdfg54fsjdgfb"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.declined"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer is not credit worthy"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The order is declined</p>

<h3 id="order-signed">Order signed</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt:sdfgkjshdfg87oihsjdgfb"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.signed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The customer has signed and the shop can ship the products</p>

<h3 id="order-delivery-has-been-approved">Order delivery has been approved</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt:sdfgkjshdfg87oihsjdgfb"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.deliveryApproved"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>The customer has confirmed that the products has arrived</p>

<h3 id="updated-tariffs">Updated tariffs</h3>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"evt:dsfsdf55ds3dgfb"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tariff.updated"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"tariffs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">  
      </span><span class="p">{</span><span class="w">  
        </span><span class="s2">"months"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tariff"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.51</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">  
        </span><span class="s2">"months"</span><span class="p">:</span><span class="w"> </span><span class="mi">36</span><span class="p">,</span><span class="w">
        </span><span class="s2">"tariff"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.01</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>When the tariff changes</p>

          <h1 id="errors">Errors</h1>
<pre class="highlight json tab-json"><code><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrderCantBeModified"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"It's to late to edit the order"</span><span class="p">,</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>LeaseCloud are using rest status <a href="http://www.restapitutorial.com/httpstatuscodes.html">codes</a></p>

<p>If there is an error we will return a 4xx or 5xx status code</p>

<p>The response will be a json object only containing an error object.</p>

<p>The error object will always contain <code class="prettyprint">code</code> and <code class="prettyprint">message</code> and in the case of
<code class="prettyprint">InvalidOrder</code> it will also contain <code class="prettyprint">fields</code> which is an array of invalid fields.</p>

<h3 id="codes">Codes:</h3>

<p><strong>Default responses</strong></p>

<ul>
<li>NotFound <strong>404</strong></li>
<li>BadRequest <strong>400</strong></li>
<li>Forbidden <strong>403</strong></li>
<li>InternalServerError <strong>500</strong></li>
</ul>

<p><strong>Custom errors</strong></p>

<ul>
<li>InvalidOrder <strong>400</strong> = Invalid form input and also contains <code class="prettyprint">fields</code> attribute</li>
<li>OrderNotAccepted <strong>400</strong> = When an order is denied instantly like none existing org number or bad credit rating</li>
<li>OrderCantBeModified <strong>403</strong> = When it&rsquo;s to late or to early to change an order e.g. edit an order that is shipped</li>
</ul>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"InvalidOrder"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Validation error"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing.address"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"billing.address can't be null"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"orgNumber"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OrgNumberNotFound"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xxxxxx-xxxx is not a registered organization number"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="fields">Fields</h3>

<ul>
<li>field = Which field that didn&rsquo;t pass the validation</li>
<li>message = Human readable reason for invalidation</li>
<li>code = Only a few errors get&rsquo;s a code at the moment</li>
</ul>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
